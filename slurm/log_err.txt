Input Notebook:  testing_lm_question_generation.ipynb
Output Notebook: testing_lm_question_generation.ipynb
Executing:   0%|          | 0/4 [00:00<?, ?cell/s]Executing notebook with kernel: python3
Executing:  25%|██▌       | 1/4 [00:48<02:26, 48.81s/cell]Executing:  50%|█████     | 2/4 [08:09<09:18, 279.47s/cell]Executing: 100%|██████████| 4/4 [08:28<00:00, 110.04s/cell]Executing: 100%|██████████| 4/4 [08:31<00:00, 127.81s/cell]
Traceback (most recent call last):
  File "/usr/lib/python3.10/runpy.py", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/papermill/__main__.py", line 4, in <module>
    papermill()
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/click/decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/papermill/cli.py", line 250, in papermill
    execute_notebook(
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/papermill/execute.py", line 128, in execute_notebook
    raise_for_execution_errors(nb, output_path)
  File "/home2/g.torresgamez/.local/lib/python3.10/site-packages/papermill/execute.py", line 232, in raise_for_execution_errors
    raise error
papermill.exceptions.PapermillExecutionError: 
---------------------------------------------------------------------------
Exception encountered at "In [3]":
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
File ~/.local/lib/python3.10/site-packages/pandas/core/indexes/base.py:3790, in Index.get_loc(self, key)
   3789 try:
-> 3790     return self._engine.get_loc(casted_key)
   3791 except KeyError as err:

File index.pyx:152, in pandas._libs.index.IndexEngine.get_loc()

File index.pyx:181, in pandas._libs.index.IndexEngine.get_loc()

File pandas/_libs/hashtable_class_helper.pxi:7080, in pandas._libs.hashtable.PyObjectHashTable.get_item()

File pandas/_libs/hashtable_class_helper.pxi:7088, in pandas._libs.hashtable.PyObjectHashTable.get_item()

KeyError: 'answer'

The above exception was the direct cause of the following exception:

KeyError                                  Traceback (most recent call last)
Cell In[3], line 2
      1 args_list = ["-m", "lmqg/t5-base-squad-qag", "-e", "./evaluate_lm_question_generation/", "-d", "./data/data/test.csv", "-l", "en"]
----> 2 run_evaluation(args_list)

File /mnt/nas05/clusterdata01/home2/g.torresgamez/npr_mc2/lm-question-generation/lmqg/lmqg_cl/qag_evaluation.py:187, in run_evaluation(args_list)
    184 parser = create_parser()
    185 args = parser.parse_args(args_list)
--> 187 evaluate_qag(args.model, args.model_ae, args.max_length, args.max_length_output, args.dataset_path, args.dataset_name, args.test_split, args.validation_split, args.n_beams, args.batch_size, args.language, args.use_auth_token, args.device_map, args.low_cpu_mem_usage, args.export_dir, args.hyp_test, args.hyp_dev, args.overwrite_prediction, args.overwrite_metric, args.use_reference_answer)

File /mnt/nas05/clusterdata01/home2/g.torresgamez/npr_mc2/lm-question-generation/lmqg/lmqg_cl/qag_evaluation.py:124, in evaluate_qag(model, model_ae, max_length, max_length_output, dataset_path, dataset_name, test_split, validation_split, n_beams, batch_size, language, use_auth_token, device_map, low_cpu_mem_usage, export_dir, hyp_test, hyp_dev, overwrite_prediction, overwrite_metric, use_reference_answer)
    122 for paragraph, g in df.groupby("paragraph"):
    123     model_input.append(paragraph)
--> 124     model_highlight.append(g['answer'].tolist())
    125     gold_reference.append(' | '.join([
    126         f"question: {i['question']}, answer: {i['answer']}" for _, i in g.iterrows()
    127     ]))
    128 prediction = None

File ~/.local/lib/python3.10/site-packages/pandas/core/frame.py:3893, in DataFrame.__getitem__(self, key)
   3891 if self.columns.nlevels > 1:
   3892     return self._getitem_multilevel(key)
-> 3893 indexer = self.columns.get_loc(key)
   3894 if is_integer(indexer):
   3895     indexer = [indexer]

File ~/.local/lib/python3.10/site-packages/pandas/core/indexes/base.py:3797, in Index.get_loc(self, key)
   3792     if isinstance(casted_key, slice) or (
   3793         isinstance(casted_key, abc.Iterable)
   3794         and any(isinstance(x, slice) for x in casted_key)
   3795     ):
   3796         raise InvalidIndexError(key)
-> 3797     raise KeyError(key) from err
   3798 except TypeError:
   3799     # If we have a listlike key, _check_indexing_error will raise
   3800     #  InvalidIndexError. Otherwise we fall through and re-raise
   3801     #  the TypeError.
   3802     self._check_indexing_error(key)

KeyError: 'answer'

